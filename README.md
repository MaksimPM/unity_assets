<h1 align="center">Unity Assets Scraper API</h1> 
        
<h2 align="center">Сервис для скраппинга FREE Assets с сайта https://assetstore.unity.com/</h2>

 Основной стек проекта:
  
      1. Python==3.11
      
      2. Django==4.1.13

      3. Djangorestframework==3.15.1

      4. Celery==5.3.6

      5. Celery-Beat==2.7.0

      6. Selenium==4.28.1
      
      8. PostgreSQL (DjangoORM)

<h2 align="left">Для запуска проекта через Docker необходимо:</h2>

• Создать и заполнить файл ```.env``` по шаблону файла ```.env.sample```

• Запустить Docker командой:
```shell
docker compose up --build
```

    Для тестирования сервиса рекомендуется использовать ```Postman```, 
    файл с коллекцией находится в корне проекта

    В тестовом режиме скраппинг выполняется на одной странице, 
    чтобы получать все данные со всех страниц, необходимо раскомментировать 
    код в файле tasks.py в приложении assets

________________________________________

<h2 align="left">Для запуска проекта без Docker необходимо:</h2>
  
• Установить виртуальное окружение в корневой папке проекта командой:
```shell
python3.11 -m venv venv
```
• Запустить виртуальное окружение командой:
```shell
source venv/bin/activate
```
• Создать в корне проекта файл ```.env``` и заполнить данные по образцу из файла ```.env.sample```

• Установить все необходимые зависимости, указанные в файле ```requirements.txt```:
```shell
pip install -r requirements.txt
```
• Выполнить создание и применение миграций командами:
```shell
python3 manage.py makemigrations
```
```shell
python3 manage.py migrate
```
   
• Создать суперпользователя командой:
```shell
python3 manage.py csu
```

• Запустить сервер командой:
```shell
python3 manage.py runserver
```

• Установить Google Chrome(если нет на компьютере):

• Запустить Celery командой:
```shell
celery -A config worker -l INFO
```

• Запустить Celery-Beat командой: (необходимо предварительно настроить расписание в settings.py)
```shell
celery -A config beat -l INFO
```
________________________________________
## Возможности сервиса

    Сервис выполняет скраппинг Unity Assets по расписанию 
    с определенной периодичностью и загружает данные в базу
________________________________________
## Эндпоинты (Endpoints)

### Регистрация пользователя

URL: /users/sign-up/

Метод: ```POST```

Пример запроса:

{
    "name": "......",
    "email": "......",
    "password": "......"
}

Ответ:
- Получаем сообщение на почту с приветствием и кодом подтверждения email (Celery)
________________________________________
### Авторизация пользователя

URL: /users/sign-in/

Метод: ```POST```

Пример запроса:

{
    "email": "......",
    "password": "......"
}

Ответ:

{
    "JWT Token": "......"
}
________________________________________
### Запрос на смену пароля (Требуется авторизация)

URL: /users/recovery/

Метод: ```POST```

Пример запроса:

{
    "email": "......"
}

Ответ:
- Получаем сообщение на почту с ссылкой на смену пароля (Celery)
________________________________________
### Смена пароля (Требуется авторизация)

URL: /users/recovery/:hash/ - (ссылка отправленная на почту)

Метод: ```PUT```

Пример запроса:

{
    "password": "......"
}  

Ответ:
- Смена пароля успешно выполнена
________________________________________
### Подтверждение почты (Требуется авторизация)

URL: /users/confirm_email/ - (код отправлен на почту)(Celery)

Метод: ```POST```

Пример запроса:

{
    "confirmation_code": "......"
}  

Ответ:
- Почта успешно подтверждена
________________________________________
### Просмотр одного Unity Asset по ID (Требуется авторизация)

URL: /assets/<int:pk>/detail/

Метод: ```GET```

Ответ:
- Выводит опеределенный asset по id
________________________________________
### Просмотр списка Unity Assets (Требуется авторизация)

URL: /assets/list/

Метод: ```GET```

Ответ:
- Выводит спсиок assets 
  
________________________________________

- К проекту подключен Swagger, дополнительную информацию можно найти по URL: ```/docs/```

### Удачи!
